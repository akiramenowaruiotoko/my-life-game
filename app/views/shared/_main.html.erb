<div class="main">

  <div class="upper-main">
    <div class="nickname">
      nickname<br>
      <%= @user.nickname %>さん
    </div>
    <div class="free-time-wrapper">
      <p>１日の自由時間<p>
      <div class="free-time", id="free-time"> 
        <%= @user.free_time.strftime("%H:%M") %>
      </div>
    </div>
    <div class="chenge-time">
      カウントダウン開始/表示切り替え<br>
      <button class="remaining-date", id="remaining-date">
        日付
      </button>
      <button class="remaining-free-time", id="remaining-free-time">
        自由時間
      </button>
    </div>
  </div>

  <ul class="targets">目標<br>
    <% @targets.each do |target| %>
      <% unless target.achieve %>
        <li class="target" target-id=<%= target.id %>>
          <div class="upper-target">
          達成予定日
            <div class="taget-date" ,id="targetDate"><%= target.target_date %></div>
            <div class="remaining-time", id='remaining-time'></div>
          </div>
          <div class="lower-target">
            <div class="target-content">
              <%= target.content %>
            </div>
          </div>
          <div class="side-target">
            <div class="target-fight">
              <%= target.fights.count %>
              <% if current_user.already_fought?(target) %>
                <%= link_to target_fight_path(target, target), method: :delete, class: "fight" do %>
                  <i class="fas fa-heart"></i>
                <% end %>
              <% else %>
                <%= link_to target_fights_path(target), method: :post, class: "fight" do %>
                  <i class="far fa-heart"></i>
                <% end %>
              <% end %>
            </div>
            <% if user_signed_in? && current_user.id == @user.id %>
              <div class="target-achieve">
                <% if target.already_achieved?(target) %>
                  <%= link_to  target_achiefe_path(target, target), method: :delete, class: "achieve" do %>
                    <i class="fas fa-check-square"></i>
                  <% end %>
                <% else %>
                  <%= link_to target_achieves_path(target), method: :post, class: "achieve" do %>
                    <i class="far fa-square"></i>
                  <% end %>
                <% end %>
              </div>
              <div class="target-edit">
                <%= link_to "edit", edit_target_path(target.id), class: "edit" %>
              </div>
              <div class="target-delete">
                <%= link_to "delete", target_path(target.id), method: :delete, class: "edit" %>
              </div>
            <% end %>
          </div>
        </li>  
      <% end %>
    <% end %>    
  </ul>

  <ul class="achieves">取得スキル<br>
    <% @targets.each do |target| %>
      <% if target.achieve %>
        <li class="target" target-id=<%= target.id %>>
          <div class="upper-target">
          取得日
            <div class="skill-date" ,id="skillDate"><%= target.target_date %></div>
          </div>
          <div class="lower-target">
            <div class="target-content">
              <%= target.content %>
            </div>
          </div>
          <div class="side-target">
            <div class="target-fight">
              <%= target.fights.count %>
              <% if current_user.already_fought?(target) %>
                <%= link_to target_fight_path(target, target), method: :delete, class: "fight" do %>
                  <i class="fas fa-heart"></i>
                <% end %>
              <% else %>
                <%= link_to target_fights_path(target), method: :post, class: "fight" do %>
                  <i class="far fa-heart"></i>
                <% end %>
              <% end %>
            </div>
            <% if user_signed_in? && current_user.id == @user.id %>
              <div class="target-achieve">
                <% if target.already_achieved?(target) %>
                  <%= link_to  target_achiefe_path(target, target), method: :delete, class: "achieve" do %>
                    <i class="fas fa-check-square"></i>
                  <% end %>
                <% else %>
                <%= link_to target_achieves_path(target), method: :post, class: "achieve" do %>
                  <i class="far fa-square"></i>
                <% end %>
              <% end %>
              </div>
              <div class="target-edit">
                <%= link_to "edit", edit_target_path(target.id), class: "edit" %>
              </div>
              <div class="target-delete">
                <%= link_to "delete", target_path(target.id), method: :delete, class: "edit" %>
              </div>
            <% end %>
          </div>
        </li>  
      <% end %>    
    <% end %>    
  </ul>
                
</div>
